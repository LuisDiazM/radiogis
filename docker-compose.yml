version: '2.2'

services:

    database:
        image: postgres:12.3-alpine
        restart: always
        env_file: plataforma/.env
        ports:
            - 5432:5432
        
    radioastronomy-backend:
        build: plataforma/.
        restart: always
        env_file: plataforma/.env
        depends_on:
            - database  
        ports:
            - 8000:8000
        command: ./main.sh

    broker:
        build: broker/.
        restart: always
        ports: 
            - 1883:1883
            - 9001:9001